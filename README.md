⚠️ Work in progress (early MVP). APIs and behavior may change.
# craftsman

Бесплатный аскетичный редактор для писателей, сценаристов и людей, работающих с текстом, которым важна эстетически спокойная и сосредоточенная среда.

Программа создаётся как автономное десктоп-приложение для письма и редактуры текста, способное полноценно работать оффлайн.
Веб-версия рассматривается как форма распространения в будущем, но не влияет на решения MVP.

## Канон (vNext)
- Верхний канон решений/изменений (свободная интерпретация запрещена): `CANON.md`
- COREX (философия + целевая архитектура + долгий горизонт): `docs/corex/COREX.md`
- Канон проекта и дорожная карта: `docs/BIBLE.md`
- Сжатый контекст (что сейчас, что нельзя ломать): `docs/CONTEXT.md`
- Процесс (“Spec‑Lite”): `docs/PROCESS.md`
- Последний срез для нового агента: `docs/HANDOFF.md`
- Стартовый промпт для смены аккаунта/агента: `docs/AGENT_START_PROMPT.md`

## Цель проекта
Создать простое, надёжное и приятное пространство для работы с текстом, в котором ничто не отвлекает от письма и редактуры.

Проект развивается как инди-инициатива, ориентированная на ощущение работы с текстом, устойчивость и долгосрочное использование.

## Аудитория
- сам автор проекта
- узкий круг людей, регулярно работающих с текстом (проза, эссе, сценарии)
- более широкая группа писателей и эстетов, ценящих минимализм, моношрифты и спокойную визуальную среду

## Принципы
- автономность и оффлайн-работа — норма
- минимализм интерфейса и архитектуры
- отсутствие отвлекающих элементов
- программа остаётся бесплатной для пользователей

## MVP vNext (цель)
См. `CANON.md` и `docs/BIBLE.md`. Коротко:
- проект‑папка (manifest/styles/scenes/recovery/assets/backups)
- сцены как отдельные сущности
- Draft editor: Tiptap/ProseMirror (OSS) + `styleId`
- Yjs per scene (в MVP без провайдера)
- экспорт v1: DOCX первым

### Текущее состояние (legacy)
Кодовая база находится в переходе на vNext. В текущей реализации могут ещё встречаться legacy‑решения (например, `.txt`‑документы). Канон и план миграции — в `docs/BIBLE.md`.

### Осознанно не входит в MVP
- аккаунты и авторизация
- синхронизация и облачное хранение
- социальные функции
- сложное форматирование
- плагины и расширяемая архитектура
- интеграция AI-функций

## Бесплатность
Программа бесплатна для пользователей.
В текущей версии отсутствуют платные функции, подписки и ограничения.

## License
- License: AGPL-3.0-or-later
- Full license text: `LICENSE`
- AGPL source-availability policy: `docs/OPERATIONS/AGPL_SOURCE_OFFER.md`
- Contributions are licensed under AGPL-3.0-or-later.

## Перспектива развития
Проект может развиваться и расширяться со временем, однако текущая версия сознательно ограничена базовыми задачами письма и редактуры текста.

В перспективе возможны:
- аккаунты и синхронизация со сторонними хранилищами
- социальное пространство для людей, объединённых интересом к письму и тексту
- версии для мобильных платформ (Android и iOS)

Будущие направления развития не влияют на архитектурные решения MVP.

## Архитектура (на текущем этапе)
Архитектура минимальная и может меняться по мере развития проекта.

- автономное десктоп-приложение
- локальное хранение данных
- простая структура приложения
- минимум зависимостей
- упор на стабильность и читаемость кода

## Запуск проекта
Минимальные шаги для локального запуска:

```bash
npm install
npm run dev
```

## OSS policy (anti‑paywall)
- Запрещены `@tiptap-pro/*`, `@tiptap-cloud/*`, `registry.tiptap.dev`, `TIPTAP_PRO_TOKEN`.
- Локальная проверка: `npm run oss:policy`

## Запуск
- `npm install`
- `npm run dev` — для разработки
- `npm start` — запуск собранной версии

## Сборка macOS
- `npm run build:mac`
- Результат появляется в папке `dist/`

Иконка приложения (macOS):
- положите логотип в `src/renderer/assets/logo.png`
- выполните `npm run icons:mac` для генерации `build/icon.png` и `build/icon.icns`

## Где хранятся данные (macOS)
- Основная папка: `~/Documents/craftsman/` (если ранее была `~/Documents/WriterEditor/`, она тоже учитывается)
- Автосохранения/бэкапы: зависят от версии (legacy vs vNext). Актуальный формат данных vNext описан в `docs/BIBLE.md`.
- При первом запуске craftsman автоматически копирует содержимое `~/Documents/WriterEditor/`, если новая папка пустая.
- Дополнительные настройки (размеры окна, шрифт и т.п.) хранятся в каталоге, возвращаемом `app.getPath('userData')`

## Контекст разработки (для нового агента/аккаунта)
- Верхний канон: `CANON.md`
- Канон проекта: `docs/BIBLE.md`
- Сжатый контекст проекта и текущих решений: `docs/CONTEXT.md`
- Короткая хронология изменений (что сделали/зачем/что дальше): `docs/WORKLOG.md`
- Процесс разработки (“Spec‑Lite”) и шаблоны ТЗ/проверок: `docs/PROCESS.md` и `docs/templates/*`
- “Мозг проекта” (handoff/log/new-task): `npm run brain:*` (см. `docs/PROCESS.md`)

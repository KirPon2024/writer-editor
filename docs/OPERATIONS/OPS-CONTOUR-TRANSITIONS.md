# OPS Contour Transitions

Переходы между контурами описывают момент, когда фокус работ смещается, а инварианты продолжают удерживать систему от дрейфа.

## Why transitions exist (anti-drift purpose)
Переход фиксирует границы ответственности: что считается «готовым» в текущем контуре и какие ожидания остаются неизменными при расширении области работ.

## A → B (Platform / Adapters)

### Preconditions (DONE)
- Контур A стабилизирован как минимальный, проверяемый слой: публичные контракты выделены и экспортируются единообразно.
- Инварианты контуров применялись на протяжении работ в A.

### What stays active
- Требование чистого рабочего дерева перед изменениями.
- Ограничение изменений по явному списку путей.
- Приоритет запретных действий над разрешёнными.
- Политика «CORE без эффектов» (платформенная нейтральность и отсутствие токенов эффектов).
- Повторяемая проверка A4 (smoke) как быстрый контроль целостности.

### What is explicitly NOT active
- Платформенные детали и вариативность адаптеров не фиксируются как архитектурное решение сами по себе.
- Выбор конкретных реализаций адаптеров не считается частью контура A.

### Checks to add later (not now)
Эти проверки **планируются** как усиление контура B, но **не** добавляются в текущие gates/скрипты автоматически:
- Conformance-check адаптеров: соблюдение границы “CORE без эффектов”, отсутствие прямых платформенных вызовов из CORE.
- Security-check оболочки: CSP активен; navigation blocked; new-window blocked; no remote code.
- IPC-check: allowlist каналов и валидация payload (без расширения контрактов “по ходу”).
- Offline-check: отсутствие сетевых запросов в платформенном слое.
- Adapter-matrix smoke: минимальная проверка запуска/инициализации для каждого адаптера (отдельно от A4 smoke).

## A → UI

### Preconditions (DONE)
- Контур A стабилизирован как слой контрактов и чистого CORE.
- Риски дрейфа контрактов и экспортной поверхности сняты.

### What stays active
- Требование чистого рабочего дерева перед изменениями.
- Ограничение изменений по явному списку путей.
- Приоритет запретных действий над разрешёнными.
- Политика «CORE без эффектов».

### What is explicitly NOT active
- Визуальные решения и поведенческие детали UI не переопределяют контракты и границы CORE.
- UI‑детали не используются как основание для «размывания» ответственности CORE.

## A → Release

### Preconditions (DONE)
- Контур A стабилизирован и проверяем: базовые проверки проходят, smoke‑контроль даёт устойчивый результат.
- Экспортная поверхность контрактов непротиворечива.

### What stays active
- Требование чистого рабочего дерева перед изменениями.
- Ограничение изменений по явному списку путей.
- Приоритет запретных действий над разрешёнными.
- Политика «CORE без эффектов».

### What is explicitly NOT active
- Изменения поведения и расширение функциональности не являются частью перехода на выпуск.
- Переход не вводит новых инвариантов; он фиксирует применение уже существующих.
